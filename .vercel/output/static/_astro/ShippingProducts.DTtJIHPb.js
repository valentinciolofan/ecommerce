import{j as e}from"./jsx-runtime.CzgMDNMm.js";import{r as h}from"./index.DQ2WTIsS.js";import{u as V,c as O}from"./UserContext.6V2hC7ai.js";/* empty css                               */const R=({onDetailsFilled:n,collectOrderInfo:s})=>e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"title-delivery-details",children:"DELIVERY DETAILS"}),e.jsxs("div",{className:"form-delivery-details",children:[e.jsx("input",{type:"text",name:"name",placeholder:"NAME*",onChange:s,required:!0}),e.jsx("input",{type:"text",name:"surname",placeholder:"SURNAME/S*",onChange:s,required:!0}),e.jsx("input",{type:"text",name:"address",placeholder:"ADDRESS*",onChange:s,required:!0}),e.jsx("input",{type:"text",name:"additionalInfo",placeholder:"ADDITIONAL INFORMATION*",onChange:s}),e.jsx("input",{type:"text",name:"city",placeholder:"CITY/TOWN*",onChange:s,required:!0}),e.jsx("input",{type:"text",name:"postcode",placeholder:"POSTCODE*",onChange:s,required:!0}),e.jsx("input",{type:"text",name:"region",placeholder:"REGION*",onChange:s,required:!0}),e.jsx("p",{className:"contact-delivery-details",children:"CONTACT INFORMATION"}),e.jsx("small",{children:"We will use it to update the status of your delivery"}),e.jsx("input",{type:"text",name:"email",placeholder:"EMAIL*",onChange:s,required:!0}),e.jsx("input",{type:"text",name:"phone",placeholder:"PHONE*",onChange:s,required:!0}),e.jsx("button",{type:"button",className:"btn-shipping-continue",onClick:()=>n(!0),children:"CONTINUE"})]})]});var L="https://js.stripe.com/v3",F=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,k="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",H=function(){for(var s=document.querySelectorAll('script[src^="'.concat(L,'"]')),t=0;t<s.length;t++){var l=s[t];if(F.test(l.src))return l}return null},A=function(s){var t="",l=document.createElement("script");l.src="".concat(L).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(l),l},q=function(s,t){!s||!s._registerWrapper||s._registerWrapper({name:"stripe-js",version:"3.4.1",startTime:t})},y=null,N=null,S=null,B=function(s){return function(){s(new Error("Failed to load Stripe.js"))}},Y=function(s,t){return function(){window.Stripe?s(window.Stripe):t(new Error("Stripe.js not available"))}},z=function(s){return y!==null?y:(y=new Promise(function(t,l){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe&&s&&console.warn(k),window.Stripe){t(window.Stripe);return}try{var r=H();if(r&&s)console.warn(k);else if(!r)r=A(s);else if(r&&S!==null&&N!==null){var c;r.removeEventListener("load",S),r.removeEventListener("error",N),(c=r.parentNode)===null||c===void 0||c.removeChild(r),r=A(s)}S=Y(t,l),N=B(l),r.addEventListener("load",S),r.addEventListener("error",N)}catch(u){l(u);return}}),y.catch(function(t){return y=null,Promise.reject(t)}))},W=function(s,t,l){if(s===null)return null;var r=s.apply(void 0,t);return q(r,l),r},w,T=!1,b=function(){return w||(w=z(null).catch(function(s){return w=null,Promise.reject(s)}),w)};Promise.resolve().then(function(){return b()}).catch(function(n){T||console.warn(n)});var U=function(){for(var s=arguments.length,t=new Array(s),l=0;l<s;l++)t[l]=arguments[l];T=!0;var r=Date.now();return b().then(function(c){return W(c,t,r)})};const G=U("pk_test_51PVVxaEZbF6dio7iTjo5JguBuXPvFmlSfPJrZUkzEaksQnUuVP9nt3z74pjCzpI6O6qu3KuwSRYAK3N2Ft5xzIy700JPHkXNap"),X=({cartItems:n})=>{console.log(n);const s=h.useCallback(async()=>{const t=await G,r=await(await fetch("http://localhost:3000/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json(),c=await t.redirectToCheckout({sessionId:r.id});c.error&&console.error(c.error.message)},[]);return e.jsx("button",{onClick:s,className:"btn-checkout",children:"Checkout"})},Z=({cartItems:n})=>e.jsx("div",{className:"App",children:e.jsx(X,{cartItems:n})}),J=["123 Fashion Ave, New York, NY 10001","456 Style St, Los Angeles, CA 90001","789 Trend Blvd, Miami, FL 33101","321 Chic Dr, Dallas, TX 75201","654 Couture Ln, Chicago, IL 60601","987 Glamour Rd, San Francisco, CA 94101","246 Vogue Pl, Seattle, WA 98101","135 Elegance Ave, Boston, MA 02101","753 Style Pkwy, Houston, TX 77001","864 Trendy Way, Atlanta, GA 30301"],ee=()=>{const[n,s]=h.useState(0),[t,l]=h.useState(""),[r,c]=h.useState(!1),[u,g]=h.useState(!1),[o,m]=h.useState({}),[M,p]=h.useState(!0),f=V(O);h.useEffect(()=>{if(typeof window<"u"){const i=localStorage.getItem("currentStep"),a=localStorage.getItem("deliveryMethod"),x=localStorage.getItem("detailsFilled")==="true",j=localStorage.getItem("orderInfo");i!==null&&s(parseInt(i,10)),a&&l(a),j&&m(JSON.parse(j)),g(x)}m(i=>({...i,items:f.items,total:f.total})),p(!1)},[f]),h.useEffect(()=>{Object.keys(o).length!==0&&typeof window<"u"&&localStorage.setItem("orderInfo",JSON.stringify(o))},[o]);const I=i=>{l(i),c(!1),g(!1),m(a=>({...a,delivery_method:i==="home"?"Courier":"Pick-up in store"})),typeof window<"u"&&(localStorage.setItem("deliveryMethod",i),localStorage.setItem("detailsFilled",!1))},d=i=>{c(i),m(a=>({...a,address:J[i-1]}))},E=i=>{g(i),typeof window<"u"&&localStorage.setItem("detailsFilled",i)},v=i=>{const{name:a,value:x}=i.target;m(j=>({...j,[a]:x}))},C=()=>{const i=()=>{s(0),g(!1),typeof window<"u"&&(localStorage.setItem("currentStep",0),localStorage.setItem("detailsFilled",!1))},a=()=>{l(""),typeof window<"u"&&localStorage.removeItem("deliveryMethod")};t==="home"&&(u?(i(),l("home")):a()),t==="store"&&(r?r>0&&(l("store"),c(!1)):a(),u&&n===1&&(i(),l("store"),c(1)))};h.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("session_id");a!==null&&(async()=>{p(!0);const D=await(await fetch(`http://localhost:3000/check-payment-status/${a}`)).json();p(!1),D.status==="paid"&&(s(2),await P(o),typeof window<"u"&&localStorage.removeItem("cart"))})(),u&&t==="home"?s(1):r&&t==="store"&&u&&(c(!1),s(1)),n===2&&!o.orderId&&p(!0)},[u,t,r]);const P=async i=>{p(!0),await fetch("http://localhost:3000/generate-receipt",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(a=>a.json()).then(a=>{console.log(o),m(x=>({...x,orderId:a.orderId})),p(!1),console.log(o)})};return M?e.jsx("p",{children:"Loading..."}):e.jsx("div",{className:"shipping-products-container",children:e.jsxs("div",{className:"shipping-products-wrapper",children:[e.jsxs("div",{className:"hg-bread",children:[e.jsxs("div",{className:`hg-bread-col ${n===0?"active":""}`,children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 0H0V16H16V0ZM8.863 4.96027H8.323C7.99 5.21227 7.405 5.39227 7 5.42827V6.06727C7.288 6.05827 7.729 5.98627 8.089 5.86927V11.2783H8.863V4.96027Z",fill:"black"})}),e.jsx("p",{children:"DELIVERY"})]}),e.jsxs("div",{className:`hg-bread-col ${n===1?"active":""}`,children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 0H0V16H16V0ZM10.641 10.354H8.8815C8.159 10.354 7.4535 10.3625 7.19 10.371C9.706 8.74753 10.3605 8.09303 10.3605 6.86903C10.3605 5.77253 9.57 4.93103 8.329 4.93103C7.02 4.93103 6.2465 5.80653 6.1615 6.98803L6.884 7.05603C6.9435 6.14653 7.445 5.59403 8.312 5.59403C9.1875 5.59403 9.6125 6.18903 9.6125 6.88603C9.6125 7.88053 8.992 8.40753 6.204 10.3115V11H10.641V10.354Z",fill:"black"})}),e.jsx("p",{children:"PAYMENT"})]}),e.jsxs("div",{className:`hg-bread-col ${n===2?"active":""}`,children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 0H0V16H16V0ZM10.7175 9.27453C10.7175 8.44153 10.216 7.97403 9.54448 7.78703C10.182 7.56603 10.4625 7.04753 10.4625 6.52053C10.4625 5.47503 9.55298 4.93103 8.54148 4.93103C7.25798 4.93103 6.55248 5.67053 6.39098 6.60553L7.08798 6.75853C7.19848 6.05303 7.64048 5.56853 8.53298 5.56853C9.18748 5.56853 9.72298 5.90003 9.72298 6.56303C9.72298 7.03053 9.35748 7.50653 8.45648 7.50653C8.10798 7.50653 7.76798 7.49803 7.39398 7.48103V8.12703C7.76798 8.11003 8.10798 8.10153 8.41398 8.10153C9.14498 8.10153 9.96948 8.41603 9.96948 9.24053C9.96948 9.94603 9.44248 10.4645 8.48198 10.4645C7.49598 10.4645 6.96048 9.88653 6.88398 9.03653L6.16998 9.13003C6.26348 10.218 7.07948 11.102 8.49048 11.102C9.81648 11.102 10.7175 10.3625 10.7175 9.27453Z",fill:"black"})}),e.jsx("p",{children:"SUMMARY"})]})]}),n===0&&t===""&&e.jsxs("div",{children:[e.jsx("p",{className:"checkout-delivery-title",children:"SELECT DELIVERY METHOD"}),e.jsxs("div",{className:"select-delivery",children:[e.jsx("div",{className:"select-delivery-option",onClick:()=>I("store"),children:e.jsx("p",{className:"delivery-method-title",children:"Pick-up in store"})}),e.jsx("div",{className:"select-delivery-option",onClick:()=>I("home"),children:e.jsx("p",{className:"delivery-method-title",children:"Home delivery"})})]})]}),n===0&&t==="store"&&r===!1&&e.jsxs("div",{className:"select-delivery",children:[e.jsx("svg",{onClick:C,xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20",children:e.jsx("path",{fill:"black",d:"m3.828 9l6.071-6.071l-1.414-1.414L0 10l.707.707l7.778 7.778l1.414-1.414L3.828 11H20V9z"})}),e.jsx("p",{children:"Choose a store:"}),e.jsx("div",{className:"select-delivery-option",onClick:()=>d(1),children:"123 Fashion Ave, New York, NY 10001"}),e.jsx("div",{className:"select-delivery-option",onClick:()=>d(2),children:"456 Style St, Los Angeles, CA 90001"}),e.jsx("div",{className:"select-delivery-option",onClick:()=>d(3),children:"789 Trend Blvd, Miami, FL 33101"}),e.jsx("div",{className:"select-delivery-option",onClick:()=>d(4),children:"321 Chic Dr, Dallas, TX 75201"}),e.jsx("div",{className:"select-delivery-option",onClick:()=>d(5),children:"654 Couture Ln, Chicago, IL 60601"}),e.jsx("div",{className:"select-delivery-option",onClick:()=>d(6),children:"987 Glamour Rd, San Francisco, CA 94101"}),e.jsx("div",{className:"select-delivery-option",onClick:()=>d(7),children:"246 Vogue Pl, Seattle, WA 98101"}),e.jsx("div",{className:"select-delivery-option",onClick:()=>d(8),children:"135 Elegance Ave, Boston, MA 02101"}),e.jsx("div",{className:"select-delivery-option",onClick:()=>d(9),children:"753 Style Pkwy, Houston, TX 77001"}),e.jsx("div",{className:"select-delivery-option",onClick:()=>d(10),children:"864 Trendy Way, Atlanta, GA 30301"})]}),r>0&&e.jsxs(e.Fragment,{children:[e.jsx("svg",{onClick:C,xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20",children:e.jsx("path",{fill:"black",d:"m3.828 9l6.071-6.071l-1.414-1.414L0 10l.707.707l7.778 7.778l1.414-1.414L3.828 11H20V9z"})}),e.jsx("p",{className:"title-delivery-details",children:"DELIVERY DETAILS"}),e.jsxs("div",{className:"form-delivery-details",children:[e.jsx("input",{type:"text",name:"name",placeholder:"NAME*",onChange:v,required:!0}),e.jsx("input",{type:"text",name:"surname",placeholder:"SURNAME/S*",onChange:v,required:!0}),e.jsx("input",{type:"text",name:"additionalInfo",placeholder:"ADDITIONAL INFORMATION*",onChange:v}),e.jsx("p",{className:"contact-delivery-details",children:"CONTACT INFORMATION"}),e.jsx("small",{children:"We will use it to update the status of your delivery"}),e.jsx("input",{type:"text",name:"email",placeholder:"EMAIL*",onChange:v,required:!0}),e.jsx("input",{type:"text",name:"phone",placeholder:"PHONE*",onChange:v,required:!0}),e.jsx("button",{type:"button",className:"btn-shipping-continue",onClick:()=>E(!0),children:"CONTINUE"})]})]}),n===0&&t==="home"&&e.jsxs("div",{className:"home-delivery",children:[e.jsx("svg",{onClick:C,xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20",children:e.jsx("path",{fill:"black",d:"m3.828 9l6.071-6.071l-1.414-1.414L0 10l.707.707l7.778 7.778l1.414-1.414L3.828 11H20V9z"})}),e.jsx(R,{onDetailsFilled:E,collectOrderInfo:v})]}),n===1&&u&&e.jsxs("div",{className:"order-summary",children:[e.jsx("svg",{onClick:C,xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20",children:e.jsx("path",{fill:"black",d:"m3.828 9l6.071-6.071l-1.414-1.414L0 10l.707.707l7.778 7.778l1.414-1.414L3.828 11H20V9z"})}),e.jsxs("div",{className:"final-delivery-address",children:[e.jsx("p",{children:"Contact information"}),e.jsxs("span",{children:[o.surname," ",o.name]}),t==="home"?e.jsxs("span",{children:[", ",o.city," ",o.region]}):"",e.jsxs("span",{children:[", ",o.phone]}),e.jsx("p",{children:"Address"}),t==="store"?e.jsx("span",{children:"fashionCulture"}):"",e.jsx("span",{children:o.address}),o.additionalInfo?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Additional Information"}),e.jsx("span",{children:o.additionalInfo})]}):""]}),e.jsxs("div",{className:"cart-items",children:[e.jsx("p",{children:"Your Cart"}),e.jsx("ul",{children:f.items.map((i,a)=>e.jsxs("li",{className:"cart-item",children:[e.jsx("span",{className:"cart-item-title",children:i.title}),e.jsxs("span",{className:"cart-item-quantity",children:["Qty: ",i.quantity]}),e.jsxs("span",{className:"cart-item-price",children:["$",i.price]})]},a))})]}),e.jsx(Z,{cartItems:f})]}),n===2&&e.jsxs("div",{className:"summary-columns",children:[e.jsxs("div",{className:"summary-first-col",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10em",height:"10em",viewBox:"0 0 256 256",children:e.jsx("path",{fill:"black",d:"M225.86 102.82c-3.77-3.94-7.67-8-9.14-11.57c-1.36-3.27-1.44-8.69-1.52-13.94c-.15-9.76-.31-20.82-8-28.51s-18.75-7.85-28.51-8c-5.25-.08-10.67-.16-13.94-1.52c-3.56-1.47-7.63-5.37-11.57-9.14C146.28 23.51 138.44 16 128 16s-18.27 7.51-25.18 14.14c-3.94 3.77-8 7.67-11.57 9.14c-3.25 1.36-8.69 1.44-13.94 1.52c-9.76.15-20.82.31-28.51 8s-7.8 18.75-8 28.51c-.08 5.25-.16 10.67-1.52 13.94c-1.47 3.56-5.37 7.63-9.14 11.57C23.51 109.72 16 117.56 16 128s7.51 18.27 14.14 25.18c3.77 3.94 7.67 8 9.14 11.57c1.36 3.27 1.44 8.69 1.52 13.94c.15 9.76.31 20.82 8 28.51s18.75 7.85 28.51 8c5.25.08 10.67.16 13.94 1.52c3.56 1.47 7.63 5.37 11.57 9.14c6.9 6.63 14.74 14.14 25.18 14.14s18.27-7.51 25.18-14.14c3.94-3.77 8-7.67 11.57-9.14c3.27-1.36 8.69-1.44 13.94-1.52c9.76-.15 20.82-.31 28.51-8s7.85-18.75 8-28.51c.08-5.25.16-10.67 1.52-13.94c1.47-3.56 5.37-7.63 9.14-11.57c6.63-6.9 14.14-14.74 14.14-25.18s-7.51-18.27-14.14-25.18m-52.2 6.84l-56 56a8 8 0 0 1-11.32 0l-24-24a8 8 0 0 1 11.32-11.32L112 148.69l50.34-50.35a8 8 0 0 1 11.32 11.32"})}),e.jsx("h4",{children:"Your order is made!"}),e.jsx("p",{children:"Congratulations! Your order has been successfully proceed, we will pick up your order as soon as possible!"})]}),e.jsxs("div",{className:"summary-second-col",children:[e.jsxs("div",{className:"summary-order-id-and-delivery",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2em",height:"2em",viewBox:"0 0 32 32",children:[e.jsx("path",{fill:"black",d:"m23 1l-6 6l1.415 1.402L22 4.818V21H10V10H8v11c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2V4.815l3.586 3.587L29 7z"}),e.jsx("path",{fill:"black",d:"M18.5 19h-5c-.827 0-1.5-.673-1.5-1.5v-5c0-.827.673-1.5 1.5-1.5h5c.827 0 1.5.673 1.5 1.5v5c0 .827-.673 1.5-1.5 1.5M14 17h4v-4h-4zm2 14v-2c7.168 0 13-5.832 13-13c0-1.265-.181-2.514-.538-3.715l1.917-.57C30.79 13.1 31 14.542 31 16c0 8.271-6.729 15-15 15M1.621 20.285A15 15 0 0 1 1 16C1 7.729 7.729 1 16 1v2C8.832 3 3 8.832 3 16c0 1.265.181 2.515.538 3.715z"})]}),e.jsxs("div",{children:[e.jsxs("p",{children:["Order ID #",o.orderId]}),e.jsx("small",{className:"summary-delivery-type",children:"Express Delivery"})]})]}),e.jsx("div",{className:"summary-info-columns",children:e.jsxs("div",{className:"summary-info-col",children:[e.jsxs("div",{className:"summary-info-row",children:[e.jsx("p",{className:"summary-info-col",children:"Shipper Name"}),e.jsx("p",{className:"summary-info",children:"fashionCulture Inc."}),e.jsxs("div",{className:"summary-info-row",children:[e.jsx("p",{className:"summary-info-col",children:"From"}),e.jsx("p",{className:"summary-info",children:"Str. Avenue, New York, NY, 10025"})]})]}),e.jsxs("div",{className:"summary-info-row",children:[e.jsx("p",{className:"summary-info-col",children:"Recipient Name"}),e.jsxs("p",{className:"summary-info",children:[o.surname," ",o.name]}),e.jsxs("div",{className:"summary-info-row",children:[e.jsx("p",{className:"summary-info-col",children:"To"}),e.jsx("p",{className:"summary-info",children:o.address})]})]})]})})]}),e.jsx("button",{type:"button",className:"btn-back-shopping",onClick:()=>{window.location.href="/shop",localStorage.removeItem("orderInfo")},children:"BACK TO SHOPPING"})]})]})})};export{ee as default};
