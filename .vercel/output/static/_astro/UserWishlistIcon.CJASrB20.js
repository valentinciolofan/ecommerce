import{j as s}from"./jsx-runtime.CzgMDNMm.js";import{r as l}from"./index.DQ2WTIsS.js";import{u as d,c as w,a}from"./UserContext.6V2hC7ai.js";import{u as x}from"./urlFor.DCL5kvad.js";/* empty css                               */const y=({session:e,handleLogOut:t})=>s.jsx("div",{className:"dropdownmenu-container",children:s.jsxs("div",{className:"dropdownmenu-content",children:[s.jsxs("strong",{children:["Hello, ",e.name]}),s.jsxs("ul",{className:"unordered-modal-list",children:[s.jsx("a",{className:"header-user-actions",href:"/profile",children:"View my profile"}),s.jsx("a",{className:"header-user-actions log-out",onClick:t,children:"Log out"})]})]})}),g=()=>s.jsx(s.Fragment,{children:s.jsx("div",{className:"dropdownmenu-container",children:s.jsxs("div",{className:"dropdownmenu-content",children:[s.jsxs("strong",{children:["Hello, ",user]}),s.jsxs("ul",{className:"unordered-modal-list",children:[s.jsx("a",{className:"header-user-actions",href:"/profile",children:"View my profile"}),s.jsx("a",{className:"header-user-actions",onClick:handleLogOut,children:"Log out"})]})]})})}),S=({session:e})=>{const t=d(w);return console.log(t),s.jsx("div",{className:"dropdownmenu-container",children:s.jsx("div",{className:"dropdownmenu-content",children:s.jsx("ul",{className:"unordered-modal-list",children:t.items.map(r=>s.jsx("li",{children:s.jsx("a",{href:"/product/"+r.slug,children:s.jsxs("div",{className:"products",children:[s.jsx("img",{className:"cart-product-img",src:x(r.image).url(),alt:""}),s.jsxs("div",{className:"product-details",children:[s.jsx("span",{children:r.title}),s.jsxs("span",{children:["$",r.price]})]})]})})},r.slug))})})})},D=({session:e})=>{const[t,r]=l.useState(!1),n=()=>{localStorage.setItem("currentSection","profileWishlist"),window.location.href="/profile"};return l.useEffect(()=>{window.location.pathname!=="/profile"&&localStorage.removeItem("currentSection")},[window.location.pathname]),s.jsxs(s.Fragment,{children:[s.jsx("svg",{onClick:n,xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 0 24 24",children:s.jsx("path",{fill:"currentColor",d:"m12.1 18.55l-.1.1l-.11-.1C7.14 14.24 4 11.39 4 8.5C4 6.5 5.5 5 7.5 5c1.54 0 3.04 1 3.57 2.36h1.86C13.46 6 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5c0 2.89-3.14 5.74-7.9 10.05M16.5 3c-1.74 0-3.41.81-4.5 2.08C10.91 3.81 9.24 3 7.5 3C4.42 3 2 5.41 2 8.5c0 3.77 3.4 6.86 8.55 11.53L12 21.35l1.45-1.32C18.6 15.36 22 12.27 22 8.5C22 5.41 19.58 3 16.5 3"})}),t&&s.jsx(g,{})]})},E=()=>{const e=d(a),[t,r]=l.useState(!1),n=window.location.pathname.slice(9),h=async()=>{if(e===null)return alert("You need to be logged in to add products to wishlist!");try{const o=await(await fetch("http://localhost:3000/wishlist",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({productSlug:n})})).json();o.success?(console.log("Favorite saved successfully."),r(!0)):console.error("Failed to save favorite:",o.error)}catch(i){console.error("Error:",i)}},m=async i=>{try{const o=await fetch("http://localhost:3000/remove-wishlist-product",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:n})});if(!o.ok)throw new Error(`Error: ${o.statusText}`);const c=await o.json();if(c.status==="OK"){const u=e.wishlist.filter(p=>p!==n);a.set({...e,wishlist:u})}else console.error("Error:",c.message||"Failed to remove product from wishlist")}catch(o){console.error("Error handling wishlist product:",o.message),alert("An error occurred while trying to remove the product from your wishlist. Please try again later.")}};return l.useEffect(()=>{if(e!==null){const i=e.wishlist.find(o=>o===n);r(i!==void 0)}},[e]),s.jsx(s.Fragment,{children:t?s.jsx("svg",{onClick:m,xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 0 24 24",children:s.jsx("path",{fill:"black",d:"m12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5C2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"})}):s.jsx("svg",{onClick:h,xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 0 24 24",children:s.jsx("path",{fill:"currentColor",d:"m12.1 18.55l-.1.1l-.11-.1C7.14 14.24 4 11.39 4 8.5C4 6.5 5.5 5 7.5 5c1.54 0 3.04 1 3.57 2.36h1.86C13.46 6 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5c0 2.89-3.14 5.74-7.9 10.05M16.5 3c-1.74 0-3.41.81-4.5 2.08C10.91 3.81 9.24 3 7.5 3C4.42 3 2 5.41 2 8.5c0 3.77 3.4 6.86 8.55 11.53L12 21.35l1.45-1.32C18.6 15.36 22 12.27 22 8.5C22 5.41 19.58 3 16.5 3"})})})};export{E as A,y as U,S as a,D as b};
